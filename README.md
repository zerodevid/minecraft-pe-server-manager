# Bedrock Server Panel

![Bedrock Panel](https://placehold.co/600x400?text=Bedrock+Panel)

**Bedrock Server Panel** is a powerful, web-based management interface for the Minecraft Bedrock Dedicated Server (BDS). It simplifies server administration by providing a GUI for controlling the server instance, managing resource packs, editing world settings, and monitoring player activity in real-time.

---

## ğŸŒŸ Key Features

### ğŸ® Server Control
- **Start / Stop / Restart**: Full control over the server lifecycle.
- **Auto-Restart**: Automatically detects crashes and restarts the server process.
- **Auto-Start**: Can be configured to start the Minecraft server automatically when the panel launches (or on system boot).

### ğŸ“Š Real-Time Monitoring
- **Console Stream**: View the live server console logs directly in your browser.
- **Player List**: See who is online, their XUID, and connection status.
- **Resource Usage**: Monitor server RAM usage (via Telegram reports).

### ğŸ“¦ Asset Management
- **Pack Manager**: Upload `.mcpack` files via drag-and-drop.
- **World Manager**: Import `.mcworld` or `.zip` archives to restore or switch worlds.
- **Auto-Sync**: Automatically updates `world_resource_packs.json` and `world_behavior_packs.json` when you toggle packs in the UI.
- **Name Cleaning**: Automatically removes Minecraft color codes (e.g., `Â§e`) from pack names for cleaner display.

### âš™ï¸ Configuration
- **Server Properties**: Edit `server.properties` (Gamemode, Difficulty, Port, etc.) through a user-friendly form.
- **Allowlist / Whitelist**: Manage whitelisted players via the GUI (future update).

### ğŸ“± Telegram Integration
- **Notifications**: Get real-time alerts for server events.
- **Events**: Server Start/Stop, Player Join/Leave, Bans.
- **Hourly Status**: Receive periodic reports on server health and player counts.

---

## ğŸ› ï¸ System Architecture & Flow

### 1. The Core (Node.js & Express)
The application runs on a **Node.js** backend using **Express** for the API and static file serving.
- **`server.js`**: The entry point. Handles HTTP requests and initializes the WebSocket server.
- **`bedrockProcess.js`**: A singleton service wrapping the `spawn` process of the Bedrock binary. It captures `stdout`/`stderr` and pipes it to the web console.

### 2. Real-Time Communication
- **WebSockets (`ws`)**: Connects the frontend to the backend.
- **Flow**:
    1. Server logs are emitted from the child process.
    2. Backend captures these logs.
    3. WebSocket service broadcasts logs to all connected web clients instantly.

### 3. Data Management
- **File System**: The app directly reads/writes to the `bds/` directory (properties, JSON files).
- **Pack Logic**:
    - Parsing manifests (`manifest.json`) inside packs to identify UUIDs and versions.
    - Intelligent diffing against `world_resource_packs.json` to ensure consistency.

---

## ğŸš€ Installation Guide

### Prerequisites
1.  **Node.js**: v16.0.0 or higher.
2.  **Bedrock Server Binary**: Download from [Minecraft.net](https://www.minecraft.net/en-us/download/server/bedrock) (Ubuntu/Windows version depending on your OS, or MacOS workaround).

### Step 1: Clone & Install
```bash
# Clone the repository
git clone https://github.com/zerodevid/minecraft-pe-server-manager.git
cd bedrock-panel

# Install Node dependencies
npm install
```

### Step 2: Set Up Bedrock Server
1.  Create a folder named `bds` inside the `bedrock-panel` directory.
2.  Extract your Bedrock Dedicated Server files into `bds/`.
3.  **Verify**: Ensure `bedrock_server` (executable) and `server.properties` exist at `bedrock-panel/bds/bedrock_server`.

*Note for Mac Users*: You may need to allow the binary to run via `chmod +x bds/bedrock_server` and potentially clear quarantine attributes if downloaded from the web.

### Step 3: Run the Panel
```bash
npm start
```
The panel will be accessible at: `http://localhost:4000`

---

## ğŸ“² Telegram Bot Setup
1.  Open **Settings** in the web panel.
2.  Scroll to **Telegram Notifications**.
3.  **Create a Bot**: Message [@BotFather](https://t.me/BotFather) on Telegram and create a new bot to get a **Token**.
4.  **Get Chat ID**: Message the bot or add it to a group to get the Chat ID.
5.  Enter credentials in the panel and click **Save**.

---

## ğŸ”„ Auto-Start (Production)
To run the panel 24/7 and have it start on boot, use **PM2**.

```bash
# 1. Install PM2 globally
npm install -g pm2

# 2. Start the panel
pm2 start npm --name "bedrock-panel" -- run start

# 3. Freeze the process list
pm2 save

# 4. Generate startup script
pm2 startup
```
*Run the command generated by the last step to finalize.*

---

## ğŸ“‚ Project Structure
```
bedrock-panel/
â”œâ”€â”€ bds/                  # Bedrock Server files (Ignored by Git)
â”œâ”€â”€ public/               # Frontend (HTML, CSS, JS)
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ bedrockProcess.js # Manages the server process
â”‚   â”œâ”€â”€ packManager.js    # Logic for resource/behavior packs
â”‚   â”œâ”€â”€ serverProperties.js # Parser for properties file
â”‚   â””â”€â”€ telegramBot.js    # Telegram notification service
â”œâ”€â”€ controllers/          # API Route Handlers
â”œâ”€â”€ app.js                # Express App Setup
â””â”€â”€ server.js             # Entry Point
```

## License
MIT License
